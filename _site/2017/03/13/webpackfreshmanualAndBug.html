<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Webpack入门之遇到的那些坑，系列示例Demo | Dailc的个人主页</title>
    <meta name="author" content="dailc" />
    <meta name="renderer" content="webkit">
    <meta name="description" content="Everything about dailc" />
    <meta name="baidu-site-verification" content="cVrw8PsZv7" />
    <meta name="keywords" content="dailc,戴荔春,戴荔春的博客,dailc的博客" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
  	<link href="/asserts/css/default.css" rel="stylesheet" type="text/css" media="all">
	<script type="text/javascript" src="/asserts/js/app.js" ></script> 
</head>
<body>
	<!--头部 -->
	<header class="header">
		<div class="header-container">
			<section class="site-logo">
				<a  href="/">撒网要见鱼</a>
			</section>
			<button class="collapsed " type="button" >
		        <span class="icon-bar"></span>
		        <span class="icon-bar"></span>
		        <span class="icon-bar"></span>
		    </button>
		    <div class="menu-container">
				<nav class="site-nav">
					<ul>
						<li>
							<a  href="/blog/archiveAll.html">随笔</a>
						</li>
						<li>
							<a  href="/blog/archive.html">博客</a>
						</li>
						<li>
							<a  href="/blog/categories.html">分类</a>
						</li>
						<li>
							<a  href="/blog/tags.html">标签</a>
						</li>
						<li>
							<a  href="/demo/demo.html">Demo</a>
						</li>
						<li>
							<a  href="/favour/music.html">音乐</a>
						</li>
						<li>
							<a  href="/favour/book.html">Book</a>
						</li>
						<li>
							<a  href="/about/timeline.html">时间轴</a>
						</li>
						<li>
							<a  href="/others/collection.html">收藏</a>
						</li>
						<li>
							<a  href="/about/about.html">关于</a>
						</li>
					</ul>
				</nav>
				<div class="site-search">
					<input type="text" />
				</div>
			</div>
		</div>
	</header>
	<link href="/asserts/css/blog_article_post.css" rel="stylesheet" type="text/css" media="all">
<link href="/asserts/css/blog_personCard_style.css" rel="stylesheet" type="text/css" media="all">
<link href="/asserts/css/imageBubble.css" rel="stylesheet" type="text/css" media="all">
	
	<div class="wrap">
		<div class="container">
			<!-- 左侧，内容，多说评论等-->
			<div class="col-md-9">
				<!-- 内容-->
				<div class="markdown-body">
					<!--标题区域 -->
					<div class="title-container">
					<h1 class="page-title"><a  title="Webpack入门之遇到的那些坑，系列示例Demo">Webpack入门之遇到的那些坑，系列示例Demo</a> </h1>
						<!-- metainfo-->
						<section class="meta clearfix">
<span class="time">
<time datetime="2017-03-13">2017-03-13</time>
</span>

| 
<span class="categories">
	分类
	    
	    <a href="/blog/categories.html#blog" title="blog">blog</a>&nbsp;
	    
</span>


| 
<span class="tags">
	标签
		
		<a href="/blog/tags.html#webpack" title="webpack">webpack</a>&nbsp;
		
		<a href="/blog/tags.html#node.js" title="node.js">node.js</a>&nbsp;
		
</span>

| 
<span class="views">
	浏览
	<a id="busuanzi_value_page_pv"></a>&nbsp;
</span>
</section>
						<section class="right-tips">
							<span >
								webpack
							</span>
						</section>
					</div>
					<!-- 特别推荐-->
					
					<!-- 内容区域-->
					<div class="content-container">
						 <h2 id="前言">前言</h2>
<p>网上关于webpack的教程已经数不胜数了，也无意再重新写一篇复制文。但是实际操作过程中，发现各种教程版本都不一致，有的教程已经过时了，有的教程模糊不清，因此还是遇到了各种问题，因此特将自身实际操作过程中遇到的问题记录下来，并附上相应的示例demo，也希望能给他人带来帮助！</p>

<p>本文主要是记录的一些遇到的问题以及提供了示例，如果想要看入门教程还是去官网上或者参考参考资源中的链接。</p>

<p>问题记录较多，想要直接看示例Demo的请拉到最下方。</p>

<p>另外，此文会持续更新。</p>

<h2 id="题纲">题纲</h2>

<ul>
  <li>遇到的那些问题</li>
  <li>示例，各阶段的示例demo，配有<code class="highlighter-rouge">README</code></li>
</ul>

<h2 id="遇到的那些问题">遇到的那些问题</h2>

<h3 id="问题一packagejson注释带来的问题">问题一:package.json注释带来的问题</h3>
<p><strong>说明:</strong>项目的package.json中，只要带有注释，必然编译不能通过</p>

<p><strong>解决:</strong>禁止在package.json中注释</p>

<h3 id="问题二全局安装带来的问题">问题二:全局安装带来的问题</h3>
<p><strong>说明:</strong>在最开始做项目时，由于本地已经全局安装过了对应的依赖包，因此没有再重新在本地安装，导致运行时报错，全局安装版本与本地依赖的版本不一致导致。</p>

<p><strong>解决:</strong>每一个项目中，<strong>所有的依赖包均在本地安装</strong>，依赖情况通过<code class="highlighter-rouge">npm install *** --save -dev</code>注入<code class="highlighter-rouge">package.json</code>中，其中一些环境以外的依赖，比如第三方库<code class="highlighter-rouge">express</code>等可以通过<code class="highlighter-rouge">npm install *** --save</code>安装。</p>

<p>所有的依赖包都在本地安装是一个好习惯，因为这样可以随时打包带走与重新装箱。</p>

<h3 id="问题三css-loader省略-loader带来的问题">问题三:<code class="highlighter-rouge">css-loader</code>省略<code class="highlighter-rouge">-loader</code>带来的问题</h3>
<p><strong>说明:</strong>在老版本的webpack中，经常会用省略的写法来写loader，比如</p>

<div class="highlighter-rouge"><pre class="highlight"><code>loaders: [{
  test: /\.css$/, 
  loader: "style!css"
 }],
</code></pre>
</div>
<p>但是，使用此种写法后，编译时会报错。</p>

<p><strong>解决:</strong>现在新版本中，已经不允许省略了，比如使用全称，比如:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>loaders: [{
  test: /\.css$/, 
  loader: "style-loader!css-loader"
 }],
</code></pre>
</div>

<h3 id="问题四默认情况在js中requirecss后样式嵌入在js中没有独立的css文件">问题四:默认情况，在js中<code class="highlighter-rouge">require(css)</code>后，样式嵌入在js中，没有独立的css文件</h3>
<p><strong>说明:</strong>webpack的默认设置中，如果没有引入特殊的第三方插件，在js中require的css文件是会自动写入到相应打包出的js中的，这样一来有一些缺点:</p>
<ul>
  <li>js是阻塞加载的，样式会出现很慢</li>
  <li>没有单独的css文件，缓存也不便，而且不符合开发习惯</li>
</ul>

<p><strong>解决:</strong>需要引入一个第三方插件<code class="highlighter-rouge">extract-text-webpack-plugin</code>，具体如下:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>//头部引入css打包插件
const ExtractTextPlugin = require("extract-text-webpack-plugin");

//声明对应的loaders
loaders: [{
  test: /\.css$/,
  //请注意loader里的写法，有一些低版本的例子中是过时的写法
  loader: ExtractTextPlugin.extract({
    fallback: "style-loader",
    use: "css-loader"
  })
}],

plugins: [
  ...
  //这样会定义，所有js文件中通过require引入的css都会被打包成相应文件名字的css
  new ExtractTextPlugin("[name].css"),
],
</code></pre>
</div>
<p>注意，以上loaders和plugins中都必须声明，缺一不可</p>

<h3 id="问题五extracttextplugin-插件loader写法不对导致报错">问题五:ExtractTextPlugin 插件loader写法不对导致报错</h3>
<p><strong>说明:</strong>最初在引用ExtractTextPlugin 插件时，使用了如下写法，导致了报错</p>

<div class="highlighter-rouge"><pre class="highlight"><code>loaders: [{
  test: /\.css$/,
  loader: ExtractTextPlugin.extract(["style-loader","css-loader"])
}],
</code></pre>
</div>
<p><strong>解决:</strong>原因是这种写法已经过时，根据命令台中的提示，修改为最新写法即可:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>loaders: [{
  test: /\.css$/,
  loader: ExtractTextPlugin.extract({
    fallback: "style-loader",
    use: "css-loader"
  })
}],
</code></pre>
</div>

<h3 id="问题六在js中直接requirehtml不会输出成html">问题六:在js中直接<code class="highlighter-rouge">require(html)</code>不会输出成html</h3>
<p><strong>说明:</strong>在使用webpack时，习惯性的用了万物皆模块这个概念，于是在js中引入html，如下:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>//***.js中
require('./index.html')
...
</code></pre>
</div>
<p>结果是并不会生成一个index.html的文件，而是会将html代码嵌入到js中，作为模块代码而存在。</p>

<p><strong>解决:</strong> 一般webpack项目中，会用<code class="highlighter-rouge">htmlPagePluginConfig</code>插件来引入html(这时候会给每一个html制定一个入口js文件)，然后接下来所有操作都可以从这个入口js文件中进行(比如引入css，比如逻辑操作)</p>

<p>需要注意的是，这个插件声明html时，对应引入的js路径一定要对，如:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="err">template:</span><span class="w"> </span><span class="err">'pages/index.html',</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="err">如果是只声明index，由于路径不对，则不会自动插入</span><span class="w">
  </span><span class="err">chunks:</span><span class="w"> </span><span class="err">['js/index'],</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h3 id="问题七html中的img资源不会被自动替换">问题七:html中的img资源不会被自动替换</h3>
<p><strong>说明:</strong>开发过程中使用的<code class="highlighter-rouge">htmlPagePluginConfig</code>插件加载html，但是发现构建过程中，html内部引入的img等标签不会被自动替换。</p>

<p><strong>解决:</strong>需要引入<code class="highlighter-rouge">html-loader</code>插件，有了这个插件后，引入，默认会将html内部的img自动替换掉</p>

<h3 id="问题八在html中linkcss后不会替换对应的css或者是会报错">问题八:在html中<code class="highlighter-rouge">link(css)</code>后，不会替换对应的css，或者是会报错</h3>
<p><strong>说明:</strong>正常开发是所有css都是在js中引入的，但是在某一次尝试中，准备尝试在html里用原始的link方式引入css，并引入了html-loader，如下:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;meta charset="utf-8" /&gt;
&lt;link rel="stylesheet" href="test.css" /&gt;
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>loaders: [{
  test: /\.html$/,
  use: [{
    loader: 'html-loader',
    options: {
    minimize: false,
   }
}],
</code></pre>
</div>
<p>结果按上述的方法进行后发现对于的html里的css路径没有替换，这时发现<code class="highlighter-rouge">html-loader</code>默认是不会替换css，于是又做如下改动</p>

<div class="highlighter-rouge"><pre class="highlight"><code>loaders: [{
  test: /\.html$/,
  use: [{
    loader: 'html-loader',
    options: {
    minimize: false,
    //开启link的替换
    attrs: ['img:src', 'link:href']
   }
}],
</code></pre>
</div>
<p>但是采用上述配置后，提示:<code class="highlighter-rouge">Error: "extract-text-webpack-plugin" loader is used without the corresponding plugin</code></p>

<p><strong>解决:</strong>webpack中ExtractTextPlugin需要配合js模块化引入css使用。
如果想要实现html内部linkcss，<strong>目前没有找到完美的解决方法</strong>，只知道使用webpack构建项目时，css都通过js <code class="highlighter-rouge">require</code>引入就不会有错了</p>

<h3 id="问题九css-loader中mincss重复压缩会报错">问题九:css-loader中,<code class="highlighter-rouge">.min.css</code>重复压缩会报错</h3>
<p><strong>说明:</strong>在项目中引入第三方lib文件后，发现，如果引入的文件本身已经压缩过了(如min.css文件)，这时候再采用压缩配置<code class="highlighter-rouge">css-loader?minimize</code>，则会报错</p>

<p><strong>解决:</strong>采用了正在表达式进行了过滤，含有.min.css的文件不会压缩，其它css则会压缩，如下:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>loaders: [{
  //20170314更新:以下是错误写法，比如common.css也无法匹配的
  //test: /[^((?!\.min\.css).)*$]\.css$/,
  //以下是正确写法
  test: /^((?!\.min\.css).)*\.css/,
  loader: ExtractTextPlugin.extract({
    fallback: "style-loader",
    use: "css-loader?minimize&amp;-autoprefixer"
   })
}, {
  test: /\.min\.css$/,
  loader: ExtractTextPlugin.extract({
    fallback: "style-loader",
    use: "css-loader"
   })
}],
</code></pre>
</div>

<p><strong>20170320更新</strong>
最终发现重复压缩错误的原因是因为<code class="highlighter-rouge">.min.css</code>文件中包含如下代码:</p>

<div class="highlighter-rouge"><pre class="highlight"><code> background-image: url('data:image/svg+xml;charset=utf-8,&lt;svg viewBox=\'0 0 120 120\' xmlns=\'http://www.w3.org/2000/svg\' xmlns:xlink=\'http://www.w3.org/1999/xlink\'&gt;&lt;defs&gt;&lt;line id=\'l\' x1=\'60\' x2=\'60\' y1=\'7\' y2=\'27\' stroke=\'%236c6c6c\' stroke-width=\'11\' stroke-linecap=\'round\'/&gt;&lt;/defs&gt;&lt;g&gt;&lt;use xlink:href=\'%23l\' opacity=\'.27\'/&gt;&lt;use xlink:href=\'%23l\' opacity=\'.27\' transform=\'rotate(30 60,60)\'/&gt;&lt;use xlink:href=\'%23l\' opacity=\'.27\' transform=\'rotate(60 60,60)\'/&gt;&lt;use xlink:href=\'%23l\' opacity=\'.27\' transform=\'rotate(90 60,60)\'/&gt;&lt;use xlink:href=\'%23l\' opacity=\'.27\' transform=\'rotate(120 60,60)\'/&gt;&lt;use xlink:href=\'%23l\' opacity=\'.27\' transform=\'rotate(150 60,60)\'/&gt;&lt;use xlink:href=\'%23l\' opacity=\'.37\' transform=\'rotate(180 60,60)\'/&gt;&lt;use xlink:href=\'%23l\' opacity=\'.46\' transform=\'rotate(210 60,60)\'/&gt;&lt;use xlink:href=\'%23l\' opacity=\'.56\' transform=\'rotate(240 60,60)\'/&gt;&lt;use xlink:href=\'%23l\' opacity=\'.66\' transform=\'rotate(270 60,60)\'/&gt;&lt;use xlink:href=\'%23l\' opacity=\'.75\' transform=\'rotate(300 60,60)\'/&gt;&lt;use xlink:href=\'%23l\' opacity=\'.85\' transform=\'rotate(330 60,60)\'/&gt;&lt;/g&gt;&lt;/svg&gt;');
</code></pre>
</div>

<p>所以包含这种代码的css使用css-loader的minify时会报错，解决方法是暂时将这类的css单独放入文件中，并且不进行minify</p>

<h3 id="问题十css中和html中的img路径引用出错不符合预期">问题十:css中和html中的img路径引用出错，不符合预期</h3>
<p><strong>说明:</strong>在将项目划分目录结构后，html内和css内都有引用img或font，采用<code class="highlighter-rouge">html-loader</code>替换html内部资源，之后发现构建出来后的文件中,img和font等资源的引用路径不对。如:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>本来应该是路径 ../img.***.img
结果直接就变成了 img/***.img 
导致路径不一致
</code></pre>
</div>

<p><strong>解决:</strong>默认打包路径无法替换为相对路径。这时候需要引入<code class="highlighter-rouge">publicPath</code>这个变量，将所有的资源用全局路径替换，如:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>output: {
// 用来解决css中的路径引用问题
publicPath: config.publicPath,
	},
</code></pre>
</div>
<p>以上publicPath由开发者自身根据实际情况进行配置，一般是指向项目的发布路径根目录，比如<code class="highlighter-rouge">http://localhost:8080/dist/</code>，可以自由切换开发模式和发布模式</p>

<h3 id="问题十一webpack-dev-serve配置错误带来的问题">问题十一:<code class="highlighter-rouge">webpack-dev-serve</code>配置错误带来的问题</h3>
<p><strong>说明:</strong>在使用<code class="highlighter-rouge">webpack-dev-serve</code>时遇到了如下问题:</p>

<p><strong>one:</strong></p>

<ul>
  <li>helloworld项目时，<code class="highlighter-rouge">webpack-dev-server --port 8082</code>即可开启服务，并且自动监听进行刷新(并且支持iframe刷新与inline刷新)</li>
  <li>但是在config的output中加入了<code class="highlighter-rouge">publicPath</code>后，默认的服务端配置，启动后不会自动监听进行刷新</li>
  <li>问题最终分析出了，是因为<code class="highlighter-rouge">devServer</code>和构建的路径outputPath不一致导致的，如</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>Project is running at  http://localhost:8082/
webpack output is served from http://localhost:8080/dist/
</code></pre>
</div>

<ul>
  <li>解决方法为:增加devServer的配置，自动读取publicPath，如下:(默认用了iframe刷新)</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>	//dev版才有serve
	devServer: {
		historyApiFallback: true,
		hot: false,
		//不使用inline模式,inline模式一般用于单页面应用开发，会自动将socket注入到页面代码中
		inline: false,
		//content-base就是 codeResource -需要监听源码
		contentBase: path.resolve(__dirname, config.codeResource),
		watchContentBase: true,
		// 默认的服务器访问路径，这里和配置中一致，需要提取成纯粹的host:ip
		public: /https?:\/\/([^\/]+?)\//.exec(config.publicPath)[1]
	},
</code></pre>
</div>

<p><strong>two:</strong></p>

<ul>
  <li>在运行devServer时，将contentBase指向了发布目录，如<code class="highlighter-rouge">contentBase:"dist"</code>，但是却发现修改dist里的任何文件，服务端都不会刷新</li>
  <li>最终发现是功能理解错误，在启动devServer的命令中，并不会构建出dist，也就是说，它并不是访问的dist目录下的文件，而是基于源码src直接发布到服务端的</li>
  <li>解决方法，将contentBase指向src目录，修改src目录下的文件就可以看到自动刷新了(一定要注意，server用到的不是dist下的文件)</li>
</ul>

<p><strong>three:</strong></p>

<ul>
  <li>使用devServe时，开启了<code class="highlighter-rouge">inline</code>和<code class="highlighter-rouge">hot</code>，但是热更新无效</li>
  <li>原因是，没有引入这个插件<code class="highlighter-rouge">HotModuleReplacementPlugin</code>，需要如下声明</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>new webpack.HotModuleReplacementPlugin()
</code></pre>
</div>

<p><strong>four:</strong></p>

<ul>
  <li>热更新模式下，提示<code class="highlighter-rouge">ERR_NAME_NOT_RESOLVED</code>，不能实时刷新，一直都无法找到原因</li>
  <li>说实话，正常情况下不会遇到这个问题，一般遇到这个问题请检查是否版本号不对应，也可去github上找issue</li>
  <li>但是，我这里仅仅是因为自己设置devServe时的public路径设置错误了</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>//正常设置
localhost:8080
//我的设置
http://localhost:8080
</code></pre>
</div>

<ul>
  <li>从而导致了提示<code class="highlighter-rouge">Project is running at http://http://localhost:8080/</code>，所以只需要改成正常配置即可</li>
  <li>另外需要注意的是，如果想要<code class="highlighter-rouge">iframe</code>刷新，inline和hot都要是false</li>
</ul>

<p><strong>five:</strong>(20170322更新)</p>

<ul>
  <li><code class="highlighter-rouge">webpack-dev-server</code>默认只能在localhost访问，换为内网ip就不行了(比如192.×××，就算是本机也不行的)</li>
  <li>解决: 修改server的默认配置，如</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>//这个配置可以运行其它机器访问
host: '0.0.0.0',

//或者运行时
-- host  0.0.0.0
</code></pre>
</div>

<h3 id="问题十二hash与chunkhash造成的问题">问题十二:<code class="highlighter-rouge">hash</code>与<code class="highlighter-rouge">chunkhash</code>造成的问题</h3>
<p><strong>说明:</strong>项目发布时，为了解决缓存，需要进行md5签名，这时候就需要用到<code class="highlighter-rouge">hash</code>和<code class="highlighter-rouge">chunkhash</code>等了，但是却遇到了如下问题:(hash系列问题的解决大多参考了参考来源中的博客)</p>

<p><strong>one:</strong>(hash问题)</p>

<ul>
  <li>使用<code class="highlighter-rouge">hash</code>对js和css进行签名时，每一次hash值都不一样，导致无法利用缓存</li>
  <li>原因是因为,<code class="highlighter-rouge">hash</code>字段是根据每次编译compilation的内容计算所得，也可以理解为项目总体文件的hash值，而不是针对每个具体文件的。(所以每一次编译都会有一个新的hash，并不适用)</li>
  <li>解决:不用hash，而用<code class="highlighter-rouge">chunkhash</code>(js和css要使用chunkhash)，<code class="highlighter-rouge">chunkhash</code>的话每一个js的模块对应的值是不同的(根据js里的不同内容进行生成)</li>
</ul>

<p><strong>two:</strong>(img的chunkhash问题)</p>

<ul>
  <li>前面有提到，hash在js和css中不实用，所以在项目中所有的文件都准备用<code class="highlighter-rouge">chunkhash</code>，但是又有了新的问题-img和font等资源中，使用<code class="highlighter-rouge">chunkhash</code>会报错</li>
  <li>解决:因为<code class="highlighter-rouge">chunkhash</code>只适用于js和css，img中是没有这种东西的，仍然需要用到<code class="highlighter-rouge">hash</code>(这个hash有点区别，每一个资源本身有自己的hash)</li>
</ul>

<p><strong>three:</strong>(chunkhash重复问题)</p>

<ul>
  <li>打包时发现，js和js引入的css的<code class="highlighter-rouge">chunkhash</code>是相同的，导致无法区分css和js的更新，如下</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>index2-ddcf83c3b574d7c94a42.css
index2-ddcf83c3b574d7c94a42.js
</code></pre>
</div>

<ul>
  <li>原因是因为webpack的编译理念，webpack将css视为js的一部分，所以在计算chunkhash时，会把所有的js代码和css代码混合在一起计算
*解决:css是使用<code class="highlighter-rouge">ExtractTextPlugin</code>插件引入的，这时候可以使用到这个插件提供的<code class="highlighter-rouge">contenthash</code>，如下(使用后css就有独立于js外的指纹了)，</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>new ExtractTextPlugin("[name]-[contenthash].css")
</code></pre>
</div>

<ul>
  <li>需要注意的是，在新版本中，亲自测试过，修改css的内容并不会引起js中的<code class="highlighter-rouge">chunkhash</code>变动(原因估计是webpack内置的算法变为了只计算js chunk)，所以css请务必使用<code class="highlighter-rouge">contenthash</code>，否则修改后无法生成新的签名，而是会覆盖以前的资源</li>
</ul>

<h3 id="问题十三提示unmet-peer-dependency-node-sass依赖包安装失败">问题十三:提示<code class="highlighter-rouge">UNMET PEER DEPENDENCY node-sass</code>，依赖包安装失败</h3>
<p><strong>说明:</strong>刚开始试了下，sass的编译，里面有引入<code class="highlighter-rouge">node-sass</code>这个依赖包，之后基于这个出现了一些问题</p>

<p><strong>one:</strong>(安装<code class="highlighter-rouge">node-sass</code>失败)</p>

<ul>
  <li>在用<code class="highlighter-rouge">sass</code>时，依赖了这个包，但是用npm安装时，安装失败</li>
  <li>原因是这个包放在github上的，导致装不下了</li>
  <li>解决:使用淘宝镜像安装或者使用淘宝的<code class="highlighter-rouge">cnpm</code>安装，安装cnpm如下</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>npm install -g cnpm --registry=https://registry.npm.taobao.org  
</code></pre>
</div>

<p><strong>two:</strong>(<code class="highlighter-rouge">node-sass</code>引起的其它安装包安装失败)</p>

<ul>
  <li>使用node.js安装某个依赖包时，提示UNMET PEER DEPENDENCY node-sass，而且关键是这个包本身不会依赖于它，提示如下:</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>+-- UNMET PEER DEPENDENCY node-sass@^4.0.0
 -- webpack-dev-server@2.4.1 extraneous
</code></pre>
</div>

<ul>
  <li>原因是，以前这个项目中曾经有安装过node-sass，但是安装失败了，导致node_modules里一直记录了这个任务，后续安装时都会先尝试去安装它。</li>
  <li>解决:去node_modules目录下，删除与node-sass这个依赖包的相关内容(可以全局搜索)，重新安装即可</li>
</ul>

<h3 id="问题十四sourcemap配置带来的问题">问题十四:<code class="highlighter-rouge">sourceMap</code>配置带来的问题</h3>
<p><strong>说明:</strong>在使用sourceMap时，遇到了以下问题</p>

<p><strong>one:</strong>(uglify压缩去掉了sourceMap)</p>

<ul>
  <li>在使用sourceMap时，由于用到了uglify压缩插件，所以默认去除了js尾部的注释，导致无法找到map文件</li>
  <li>解决: uglify插件加上如下配置</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>sourceMap:true,
</code></pre>
</div>

<ul>
  <li>另外config里的output可以配置<code class="highlighter-rouge">sourceMapFilename:'maps/[name].map'</code>，将map文件放入maps文件夹中</li>
</ul>

<h3 id="问题十五htmlpagepluginconfig配置带来的问题">问题十五:<code class="highlighter-rouge">htmlPagePluginConfig</code>配置带来的问题</h3>
<p><strong>20170318更新</strong>
<strong>说明:</strong> 同时引入了<code class="highlighter-rouge">html-loader</code>和<code class="highlighter-rouge">html-webpack-plugin</code>后，两个插件都设置了minify属性，则会编译生成时报错，错误配置如下:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>loader: 'html-loader',
options: {
  minimize: config.isRelease ? true : false,
}

new HtmlWebpackPlugin({
  ***
  minify: config.isRelease ? {
    collapseWhitespace: true,
    collapseBooleanAttributes: true,
    removeComments: true,
    removeEmptyAttributes: true,
    removeScriptTypeAttributes: true,
    removeStyleLinkTypeAttributes: true,
    minifyJS: true,
    minifyCSS: true
}: null,
 
})
</code></pre>
</div>

<p><strong>解决:</strong>只需要将HtmlWebpackPlugin中对应的minify属性去掉即可。</p>

<h3 id="问题十六webpack中js手动引入的图片问题">问题十六:<code class="highlighter-rouge">webpack</code>中JS手动引入的图片问题</h3>
<p><strong>20170318更新</strong>
<strong>说明:</strong> webpack是万物皆模块，但也就是说，不通过require引入的就不会算成模块了(插件中的另算，那是处理过的)。所以，在JS中手动引入图片时会遇到问题就是对应的图片并不会被打包，导致之后找不到路径。如下:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>var GalleryData = [{
    id: "testgallery1",
    title: "",
    //为空
    //保持目录结构
    url: "../../static/img/gallery/img_testgallery1.jpg"
},
{
    id: "testgallery2",
    title: "",
    //为空
    url: "../../static/img/gallery/img_testgallery2.jpg"
}];
</code></pre>
</div>
<p>以上的url就是引入的源码本地图片，但是却发现并不会被打包出来。</p>

<p><strong>解决:</strong></p>

<ul>
  <li>
    <p>将以上的<code class="highlighter-rouge">static</code>文件夹作为静态资源，用<code class="highlighter-rouge">copy-webpack-plugin</code>插件提取出来(这时候需要遵守的一个约定就是<code class="highlighter-rouge">static</code>文件夹下的是专门给js引入或者外部资源访问的，平时正常的css,html中的引入请放入其它文件夹中，比如<code class="highlighter-rouge">img</code>，避免相互影响，这就是约定大于配置)</p>
  </li>
  <li>
    <p>或者，通过require引入图片后再设置，如下:(但是这样会破坏代码结构，个人并不建议)</p>
  </li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>var imgUrl = require('./images/bg.jpg'),
imgTempl = '![]('+imgUrl+')';
</code></pre>
</div>

<h2 id="示例demo">示例Demo</h2>
<p>本次进行webpack学习时。依次安装功能递增，循序渐进的写了多个demo(每一个均可正常运行)，每一个demo都有自身的<code class="highlighter-rouge">READEME.MD</code>说明，目录结构如下；</p>

<div class="highlighter-rouge"><pre class="highlight"><code>├── 01helloWorld	# 入门hellworld，一个html,一个js，一个css，css默认嵌入在js中，html采用`HtmlWebpackPlugin`加载
├   
├── 02helloWorld2	# 基于第1个进行拓展，css使用`ExtractTextPlugin`单独打包成一个文件
├   
├── 03pageWithSingleJsAndCss	# 基于第2个进行拓展，示例页面由一个变为多个，并且抽取了通用配置文件`common.config`
├   
├── 04pageWithStaticResource	# 基于第3个进行拓展，增加了`html-loader`替换静态资源，解决了css重复压缩报错问题，使用`publicPath`，解决资源文件引用路径问题，增加了`webpack-dev-server`配置
├
├── 05withCommonChunk	# 基于第4个进行拓展，增加了`CommonsChunkPlugin`提取公告js和css，增加了`UglifyJsPlugin`,修改了一些配置，更好应用于项目
├
├── 06withHashStaticAndRelease	# 基于第5个进行拓展，增加了`CopyWebpackPlugin`复制静态资源，增加了`chunkhash`,`contenthash`等指纹签名功能，增加了`alias`别名设置，增加了release版本和dev版本的开关
├   
├── 07withLocalServer	# 基于第6个进行拓展，增加了一个`api-server`，来写本地测试接口(已经进行了跨域配置)
├   
└── 08withFamilyBucket	# 基于第7个进行拓展，webpack全家桶项目，增加了`source-map`，增加了`assets-webpack-plugin`等等
</code></pre>
</div>

<h3 id="源码地址">源码地址:</h3>
<p>系列demo的源码地址是: <a href="https://github.com/dailc/webpackFreshmanual">https://github.com/dailc/webpackFreshmanual</a></p>

<h2 id="附录">附录</h2>

<h3 id="参考资料">参考资料</h3>

<ul>
  <li><a href="http://www.jianshu.com/p/42e11515c10f">http://www.jianshu.com/p/42e11515c10f</a></li>
  <li><a href="http://www.cnblogs.com/ihardcoder/p/5623411.html">Webpack中hash与chunkhash的区别</a></li>
</ul>

<h3 id="原文链接">原文链接</h3>
<ul>
  <li><a href="https://dailc.github.io/2017/03/13/webpackfreshmanualAndBug.html">https://dailc.github.io/2017/03/13/webpackfreshmanualAndBug.html</a></li>
</ul>

					</div>
					<!-- 上一篇与下一篇-->
					<section align="right" class="post-next-prev">
					  <span>
					    <a  href="/2017/03/12/bookReview_wutheringHeighs.html" class="active"  >上一篇</a>
					    &nbsp;&nbsp;&nbsp;
					    <a  href="/2017/03/21/bookReview_ladyChatterleysLover.html" class="active"  >下一篇</a>
					  </span>
					</section>
				</div>
				<!-- 多说-->
				
<!--多说评论 -->
<div id="duoshuo-container">
<!-- 多说评论框 start -->
<div class="ds-thread" data-thread-key="http://localhost:4000/2017/03/13/webpackfreshmanualAndBug.html}" data-title="Webpack入门之遇到的那些坑，系列示例Demo" data-url="http://localhost:4000/2017/03/13/webpackfreshmanualAndBug.html"></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"dailc"};
(function() {
	var ds = document.createElement('script');
	ds.type = 'text/javascript';ds.async = true;
	ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
	ds.charset = 'UTF-8';
	(document.getElementsByTagName('head')[0] 
	 || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script>
<!-- 多说公共JS代码 end -->
</div>

				
				
			</div>
			
			<!-- 右侧包括个人介绍，TOC菜单-->
			<div class="col-md-3">
				<!-- 右侧人物面板-->
				<div class="effect1 person-card">
					
				 	<a  class="member-image">
				 			<img src="/asserts/images/img_avatar.jpg" alt="Lichun Dai"/>
				 	</a>
				 	<div class="member-info">
				 		<p class="info-name">
				 		<a >
				 			Lichun Dai
				 		</a>
				 		</p>
				 		<p>
				 			单线程生物，无法同时专注于多件事情。做自己感兴趣的工作，目前偏爱前端。业余爱好:口琴、吉他。
				 		</p>
				 	<p class="info-foot">
				 		<a class="left-card left" href="/blog/archive.html">
				 			<em>
				 				博客
				 			</em>
				 			<strong>
				 				28
				 				
				 			</strong>
				 		</a>
				 		<a class="middle-card left" href="/demo/demo.html">
				 			<em>
				 				项目
				 			</em>
				 			<strong>
				 				2
				 			</strong>
				 		</a>
				 		<a class="right-card left" href="/blog/archiveAll.html">
				 			<em>
				 				随笔
				 			</em>
				 			<strong>
				 				58
				 			</strong>
				 		</a>
				 	</p>
				 	<p class="info-social-touch">
				 		<a target="_blank" href="https://github.com/dailc" ><img src="/asserts/images/icons/favicon_github.ico" alt="GitHub"/> </a>
						<a target="_blank" href="http://5sing.kugou.com/54188866/default.html"><img src="/asserts/images/icons/favicon_5sing.ico" alt="5sing" /> </a>	
						<a target="_blank" href="http://changba.com/u/200945262"><img src="/asserts/images/icons/favicon_changba.ico" alt="唱吧" /> </a>
						<a target="_blank" href="https://www.zhihu.com/people/dailichun"><img src="/asserts/images/icons/favicon_zhihu.ico" alt="知乎" /> </a>
						<a target="_blank" href="http://www.jianshu.com/u/c104d2a4baec"><img src="/asserts/images/icons/favicon_jianshu.ico" alt="简书" /> </a>
				 	</p>
				 	</div>
				</div>

				 <!-- TOC动态菜单-->
				  <div class="slideNavContainer">     
				</div> 				
					
			</div> 
 
		</div>
	</div>
		
<script type="text/javascript" src="/asserts/js/post.js" ></script>
<script type="text/javascript" src="/asserts/js/imageBubble.js" ></script>
<script>
	ImageBubble.init('.container img');
</script>
	
	<!-- 脚步,包括版权声明，访问次数等-->
	<footer class="footer">
	    <p class="copyright">
	    	<small>
	            <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/cn/" target="_blank" title="许可协议">©</a> 2016&nbsp;&nbsp;&nbsp;&nbsp;<a href="/about/">Lichun Dai</a>
	        </small>
	    </p>
	    <p class="more-tips">
	    	<span>Powered by Jekyll</span>&nbsp;&nbsp;&nbsp;&nbsp;
	    	<span id="busuanzi_container_site_pv">总访客<span id="busuanzi_value_site_uv" class="site-uv"></span>人</span>&nbsp;&nbsp;&nbsp;&nbsp;
	    	<span id="busuanzi_container_site_pv">总访问<span id="busuanzi_value_site_pv" class="site-pv"></span>次</span>
	    </p>  
	</footer>

<script>
//百度统计
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?cf8506e0ef223e57ff6239944e5d46a4";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

<!--不蒜子 -->
<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>



</body>
</html>
